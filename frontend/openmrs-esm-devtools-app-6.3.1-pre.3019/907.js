"use strict";(globalThis.webpackChunk_openmrs_esm_devtools_app=globalThis.webpackChunk_openmrs_esm_devtools_app||[]).push([[907],{81907:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var n=r(20796),o=r.n(n),a=r(11555),l=r(95315),u=r(14357);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t,r,n,o,a,l){try{var u=e[a](l),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,o)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function l(e){c(a,n,o,l,u,"next",e)}function u(e){c(a,n,o,l,u,"throw",e)}l(void 0)}))}}function d(e,t){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return l.next=u(0),l.throw=u(1),l.return=u(2),"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(u){return function(i){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,n=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],n=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}var f=/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/;function p(e,t){return s((function(){var r,n,o;return d(this,(function(a){switch(a.label){case 0:return[4,window.importMapOverrides.getNextPageMap()];case 1:return r=a.sent(),(n=r.imports[e])?n.endsWith("/")?[2,"".concat(window.location.protocol,"//localhost:").concat(t).concat(n)]:[2,"".concat(window.location.protocol,"//localhost:").concat(t,"/").concat(n.substring(n.lastIndexOf("/")+1))]:(o=e.replace(/@/g,"").replace(/\//g,"-"),[2,"".concat(window.location.protocol,"//localhost:").concat(t,"/").concat(o,".js")])}}))}))()}const v=function(e){var t,r,c=e.module,v=e.isNew,m=e.close,b=(0,a.useTranslation)().t,h=(t=(0,n.useState)(null==c?void 0:c.moduleName),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],l=!0,u=!1;try{for(r=r.call(e);!(l=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{l||null==r.return||r.return()}finally{if(u)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),w=h[0],y=h[1],g=(0,n.useRef)(),O=(0,n.useRef)(),M=(0,n.useCallback)((function(e){return s((function(){var t,r,n,o;return d(this,(function(a){switch(a.label){case 0:return e.preventDefault(),w?(window.importMapOverrides.isDisabled(w)&&window.importMapOverrides.enableOverride(w),v?(t=O.current.value||null)?f.test(t)?[4,p(w,t)]:[3,2]:[3,3]:[3,4]):[2];case 1:t=a.sent(),a.label=2;case 2:window.importMapOverrides.addOverride(w,t),r=t.substring(0,t.lastIndexOf("/")),(0,u.addRoutesOverride)(w,new URL("routes.json",r)),a.label=3;case 3:return[3,8];case 4:return null!==(n=O.current.value||null)?[3,5]:(window.importMapOverrides.removeOverride(w),(0,u.removeRoutesOverride)(w),[3,8]);case 5:return f.test(n)?[4,p(w,n)]:[3,7];case 6:n=a.sent(),a.label=7;case 7:window.importMapOverrides.addOverride(w,n),o=n.substring(0,n.lastIndexOf("/")),(0,u.addRoutesOverride)(w,new URL("routes.json",o)),a.label=8;case 8:return m(),[2]}}))}))()}),[w,v,m]);return(0,n.useEffect)((function(){var e,t;return v?null===(e=g.current)||void 0===e?void 0:e.focus():null===(t=O.current)||void 0===t?void 0:t.focus()}),[]),o().createElement(o().Fragment,null,o().createElement(l.ModalHeader,{closeModal:m,title:v?b("addModule","Add Module"):b("editModule","Edit Module {{- moduleName}}",{moduleName:w})}),o().createElement(l.Form,{onSubmit:M},o().createElement(l.ModalBody,null,o().createElement(l.Stack,{gap:5},v&&o().createElement(l.TextInput,{id:"module-name",ref:g,onChange:function(e){e.preventDefault(),y(e.target.value)},labelText:b("moduleName","Module Name")}),!v&&o().createElement(l.TextInput,{id:"default-url",labelText:b("defaultUrl","Default URL"),value:c.defaultUrl,readOnly:!0}),o().createElement(l.TextInput,{id:"override-url",ref:O,labelText:b("overrideUrl","Override URL")}))),o().createElement(l.ModalFooter,null,o().createElement(l.Button,{kind:"secondary",onClick:m},b("cancel","Cancel")),o().createElement(l.Button,{type:"submit"},b("apply","Apply")))))}}}]);