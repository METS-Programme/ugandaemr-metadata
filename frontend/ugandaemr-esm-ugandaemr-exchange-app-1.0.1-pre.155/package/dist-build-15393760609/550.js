"use strict";(globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app=globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app||[]).push([[550],{4550:(t,e,n)=>{n.r(e),n.d(e,{default:()=>h});var r=n(1672),a=n.n(r),i=n(7078),o=n(2814),u=n(5068),c=n(5121),l=n(1132);function s(t,e,n,r,a,i,o){try{var u=t[i](o),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,a)}function d(t){var e,n,r,a="https://ai.mets.or.ug/predict",i=(e=function(){var e;return function(t,e){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,c.Z.post(a,t,{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw e=n.sent(),new Error("Error in fetcher: ".concat(e.message));case 3:return[2]}}))},n=function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(t){s(i,r,a,o,u,"next",t)}function u(t){s(i,r,a,o,u,"throw",t)}o(void 0)}))},function(){return n.apply(this,arguments)}),o=(0,u.ZP)(a,i),l=o.data,d=o.error,p=o.isValidating,f=o.isLoading;return{data:null!==(r=null==l?void 0:l.Prediction.Client)&&void 0!==r?r:{},isErrorInSendingRequest:d,isLoadingPrediction:f,isValidatingParams:p}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i=[],o=!0,u=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){u=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(u)throw a}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const h=function(){var t=f((0,r.useState)("2023-04-20"),2),e=t[0],n=(t[1],f((0,r.useState)("2020-04-20"),2)),c=n[0],s=(n[1],f((0,r.useState)("1992-04-20"),2)),p=s[0],h=(s[1],f((0,r.useState)("Female"),2)),g=h[0],m=(h[1],f((0,r.useState)("90157"),2)),v=m[0],y=(m[1],f((0,r.useState)("TDF-3TC-DTG"),2)),b=y[0],S=(y[1],f((0,r.useState)("168684"),2)),_=S[0],w=(S[1],f((0,r.useState)("93e4e7e1-c916-47d3-b00d-c7c0aa6d1ce6"),2)),E=w[0],T=w[1],L=f((0,r.useState)("ab505422-26d9-41f1-a079-c3d222000440"),2),D=L[0],P=L[1],A=function(t){var e,n,r,a,i,o="/ws/rest/v1/obs?concept=".concat(t.conceptuuid,"&patient=").concat(t.patientuuid,"&v=full"),c=(0,u.ZP)(o,l.openmrsFetch),s=c.data,d=c.error,p=c.isLoading,f=(c.isValidating,c.mutate);return{artStartDateData:s?(e=s.data.results[0].value,n=new Date(e),r=n.getFullYear(),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),"".concat(r,"-").concat(a,"-").concat(i)):[],conceptuuid:s?null==s?void 0:s.data.results[0].concept.uuid:null,patientuuid:s?null==s?void 0:s.data.results[0].person.uuid:null,isError:d,isLoading:p,mutate:f}}({patientuuid:E,conceptuuid:D}),k=A.artStartDateData,C=A.isLoading,x=A.conceptuuid,Z=A.patientuuid,V=d({last_encounter_date:e,art_start_date:c,date_birth:p,gender:g,last_arv_adherence:v,current_regimen:b,last_indication_for_VL_Testing:_}),F=V.data,I=V.isErrorInSendingRequest,j=V.isLoadingPrediction;return C&&Z&&x&&(T(Z),P(x)),j?(console.info("ART START DATE",k),console.info("Concept uuid",x),console.info("Person uuid",Z),a().createElement(i.lSo,{status:"active",iconDescription:"Loading",description:"Loading data..."})):I?a().createElement(l.ErrorState,{error:I,headerTitle:"Error"}):a().createElement("div",{className:o.Z.divContainer},a().createElement("section",{className:o.Z.section},a().createElement("div",{className:o.Z.title},"VL Suppression"),a().createElement("div",{className:o.Z.divVL},"Prediction: ",a().createElement(a().Fragment,null,F))),a().createElement("section",null))}}}]);