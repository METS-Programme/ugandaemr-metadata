"use strict";(globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app=globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app||[]).push([[770],{3745:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(7537),a=t.n(r),i=t(3645),o=t.n(i)()(a());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-ugandaemr-exchange__vl-suppression-prediction__divContainer___SdVKi{margin:1rem}.-esm-ugandaemr-exchange__vl-suppression-prediction__section___GU2bC{margin:1rem 0;background-color:#f4f4f4}.-esm-ugandaemr-exchange__vl-suppression-prediction__section___GU2bC .-esm-ugandaemr-exchange__vl-suppression-prediction__divVL___ZRRJF{padding:1rem 0;display:flex;justify-content:center}.-esm-ugandaemr-exchange__vl-suppression-prediction__button___FRYay{padding:1rem}.-esm-ugandaemr-exchange__vl-suppression-prediction__button___FRYay .-esm-ugandaemr-exchange__vl-suppression-prediction__icon___c9aD8{margin-left:.5rem}.-esm-ugandaemr-exchange__vl-suppression-prediction__elementContainer___DF1yr{display:flex;align-items:center;position:relative}.-esm-ugandaemr-exchange__vl-suppression-prediction__elementContainer___DF1yr .-esm-ugandaemr-exchange__vl-suppression-prediction__countTag___xdNpV{position:absolute;transform:scale(0.7);min-width:initial;min-height:initial;background-color:#fa4d56;color:#fff;right:-10px;top:-15px}.-esm-ugandaemr-exchange__vl-suppression-prediction__title___yUBMi{font-weight:bold !important;padding:10px 0;display:flex;justify-content:center}.-esm-ugandaemr-exchange__vl-suppression-prediction__container___tNU98{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;color:#161616;max-width:none}.-esm-ugandaemr-exchange__vl-suppression-prediction__container___tNU98:hover{color:#525252}.-esm-ugandaemr-exchange__vl-suppression-prediction__container___tNU98>span{margin-top:.25rem;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-ugandaemr-exchange__vl-suppression-prediction__patientModal___Y76ZM{overflow-y:auto}.omrs-breakpoint-gt-tablet .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf{border:.125rem solid;border-color:#007d79;border-color:var(--brand-03);border-radius:50%;background-color:#fff}.omrs-breakpoint-gt-tablet .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf:focus{border-color:var(--brand-03) !important}.omrs-breakpoint-gt-tablet .-esm-ugandaemr-exchange__vl-suppression-prediction__elementContainer___DF1yr{color:#525252}.omrs-breakpoint-lt-desktop .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf{background-color:#edf5ff;color:#0f62fe}.omrs-breakpoint-lt-desktop .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf:hover{color:#0f62fe}.omrs-breakpoint-lt-desktop .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf>span{color:#0f62fe;font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.omrs-breakpoint-lt-desktop .-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf svg{fill:#0f62fe}","",{version:3,sources:["webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/components/workspace/ai-predictions/vl-suppression-prediction.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,0EACI,WAAA,CAGJ,qEACI,aAAA,CACA,wBDTI,CCUJ,wIACI,cAAA,CACA,YAAA,CACA,sBAAA,CAIR,oEACI,YAAA,CACA,sIACI,iBAAA,CAIR,8EACI,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,oJACI,iBAAA,CACA,oBAAA,CACA,iBAAA,CACA,kBAAA,CACA,wBDnBS,CCoBT,UDjCA,CCkCA,WAAA,CACA,SAAA,CAIR,mEACI,2BAAA,CACA,cAAA,CACA,YAAA,CACA,sBAAA,CAGJ,uEACI,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,WAAA,CACA,UAAA,CACA,aDlDI,CCmDJ,cAAA,CACA,6EACI,aDpDE,CCsDN,4EACI,iBC5CK,CCk1BT,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFpyBI,aDzDE,CC6DV,0EACI,eAAA,CAOA,+FACI,oBAAA,CD3BN,oBAAA,CACA,4BAAA,CC4BM,iBAAA,CACA,qBD7EA,CC8EA,qGACI,uCAAA,CAGR,yGACI,aD/EE,CCuFN,gGACI,wBDjFQ,CCkFR,aDzES,CC0ET,sGACI,aD3EK,CC6ET,qGACI,aD9EK,CG60Bb,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CF5vBI,oGACI,YDlFK",sourceRoot:""}]),o.locals={divContainer:"-esm-ugandaemr-exchange__vl-suppression-prediction__divContainer___SdVKi",section:"-esm-ugandaemr-exchange__vl-suppression-prediction__section___GU2bC",divVL:"-esm-ugandaemr-exchange__vl-suppression-prediction__divVL___ZRRJF",button:"-esm-ugandaemr-exchange__vl-suppression-prediction__button___FRYay",icon:"-esm-ugandaemr-exchange__vl-suppression-prediction__icon___c9aD8",elementContainer:"-esm-ugandaemr-exchange__vl-suppression-prediction__elementContainer___DF1yr",countTag:"-esm-ugandaemr-exchange__vl-suppression-prediction__countTag___xdNpV",title:"-esm-ugandaemr-exchange__vl-suppression-prediction__title___yUBMi",container:"-esm-ugandaemr-exchange__vl-suppression-prediction__container___tNU98",patientModal:"-esm-ugandaemr-exchange__vl-suppression-prediction__patientModal___Y76ZM",active:"-esm-ugandaemr-exchange__vl-suppression-prediction__active___rI5Bf"};const s=o},9303:(e,n,t)=>{t.d(n,{Z:()=>C});var r=t(7410),a=t.n(r),i=t(4766),o=t.n(i),s=t(1991),c=t.n(s),_=t(3702),A=t.n(_),u=t(2434),l=t.n(u),d=t(1422),p=t.n(d),m=t(3745),g={};g.styleTagTransform=p(),g.setAttributes=A(),g.insert=c().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=l(),a()(m.Z,g);const C=m.Z&&m.Z.locals?m.Z.locals:void 0},9770:(e,n,t)=>{t.r(n),t.d(n,{default:()=>p});var r=t(1672),a=t.n(r),i=t(4268),o=t(9303),s=t(5591),c=t(5121),_=t(1132);function A(e,n,t,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,a)}function u(e){var n,t,r,a="https://ai.mets.or.ug/predict",i=(n=function(){var n;return function(e,n){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(e){i=[6,e],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,c.Z.post(a,e,{headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent().data];case 2:throw n=t.sent(),new Error("Error in fetcher: ".concat(n.message));case 3:return[2]}}))},t=function(){var e=this,t=arguments;return new Promise((function(r,a){var i=n.apply(e,t);function o(e){A(i,r,a,o,s,"next",e)}function s(e){A(i,r,a,o,s,"throw",e)}o(void 0)}))},function(){return t.apply(this,arguments)}),o=(0,s.ZP)(a,i),_=o.data,u=o.error,l=o.isValidating,d=o.isLoading;return{data:null!==(r=null==_?void 0:_.Prediction.Client)&&void 0!==r?r:{},isErrorInSendingRequest:u,isLoadingPrediction:d,isValidatingParams:l}}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,i=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==t.return||t.return()}finally{if(s)throw a}}return i}}(e,n)||function(e,n){if(e){if("string"==typeof e)return l(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const p=function(){var e=d((0,r.useState)("2023-04-20"),2),n=e[0],t=(e[1],d((0,r.useState)("2020-04-20"),2)),c=t[0],A=(t[1],d((0,r.useState)("1992-04-20"),2)),l=A[0],p=(A[1],d((0,r.useState)("Female"),2)),m=p[0],g=(p[1],d((0,r.useState)("90157"),2)),C=g[0],f=(g[1],d((0,r.useState)("TDF-3TC-DTG"),2)),v=f[0],h=(f[1],d((0,r.useState)("168684"),2)),b=h[0],y=(h[1],d((0,r.useState)("93e4e7e1-c916-47d3-b00d-c7c0aa6d1ce6"),2)),x=y[0],D=y[1],B=d((0,r.useState)("ab505422-26d9-41f1-a079-c3d222000440"),2),E=B[0],I=B[1],w=function(e){var n,t,r,a,i,o="/ws/rest/v1/obs?concept=".concat(e.conceptuuid,"&patient=").concat(e.patientuuid,"&v=full"),c=(0,s.ZP)(o,_.openmrsFetch),A=c.data,u=c.error,l=c.isLoading,d=(c.isValidating,c.mutate);return{artStartDateData:A?(n=A.data.results[0].value,t=new Date(n),r=t.getFullYear(),a=(t.getMonth()+1).toString().padStart(2,"0"),i=t.getDate().toString().padStart(2,"0"),"".concat(r,"-").concat(a,"-").concat(i)):[],conceptuuid:A?null==A?void 0:A.data.results[0].concept.uuid:null,patientuuid:A?null==A?void 0:A.data.results[0].person.uuid:null,isError:u,isLoading:l,mutate:d}}({patientuuid:x,conceptuuid:E}),k=w.artStartDateData,S=w.isLoading,T=w.conceptuuid,F=w.patientuuid,R=u({last_encounter_date:n,art_start_date:c,date_birth:l,gender:m,last_arv_adherence:C,current_regimen:v,last_indication_for_VL_Testing:b}),Z=R.data,G=R.isErrorInSendingRequest,L=R.isLoadingPrediction;return S&&F&&T&&(D(F),I(T)),L?(console.info("ART START DATE",k),console.info("Concept uuid",T),console.info("Person uuid",F),a().createElement(i.lSo,{status:"active",iconDescription:"Loading",description:"Loading data..."})):G?a().createElement(_.ErrorState,{error:G,headerTitle:"Error"}):a().createElement("div",{className:o.Z.divContainer},a().createElement("section",{className:o.Z.section},a().createElement("div",{className:o.Z.title},"VL Suppression"),a().createElement("div",{className:o.Z.divVL},"Prediction: ",a().createElement(a().Fragment,null,Z))),a().createElement("section",null))}}}]);