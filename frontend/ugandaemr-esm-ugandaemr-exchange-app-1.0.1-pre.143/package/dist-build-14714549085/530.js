"use strict";(globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app=globalThis.webpackChunk_ugandaemr_esm_ugandaemr_exchange_app||[]).push([[530,285],{8151:(e,t,n)=>{n.d(t,{Z:()=>c});var A=n(7537),a=n.n(A),o=n(3645),r=n.n(o)()(a());r.push([e.id,".-esm-ugandaemr-exchange__chatbot-button__container___POUWG{background-color:#fff;height:calc(100vh - 3rem)}.omrs-breakpoint-gt-tablet .-esm-ugandaemr-exchange__chatbot-button__container___POUWG{margin-left:var(--omrs-sidenav-width)}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-ugandaemr-exchange__chatbot-button__chatbotButtonContainer____CdkC{position:fixed;bottom:20px;right:4rem;display:flex;align-items:center}.-esm-ugandaemr-exchange__chatbot-button__chatbotButtonContainer____CdkC .-esm-ugandaemr-exchange__chatbot-button__messageContainer___SHkJD{display:flex;align-items:center;background:#ececec;padding:8px;border-radius:4px;position:relative}.-esm-ugandaemr-exchange__chatbot-button__chatbotButtonContainer____CdkC .-esm-ugandaemr-exchange__chatbot-button__chatbotText___xuKqG{font-size:13px}.-esm-ugandaemr-exchange__chatbot-button__chatbotButtonContainer____CdkC .-esm-ugandaemr-exchange__chatbot-button__closeButton___yV7Jo{background:none;border:1px solid #dbd3d3;border-radius:1rem;position:absolute;left:8px;top:50%;transform:translate(-80%, -120%);cursor:pointer;font-size:1.25rem;line-height:1;color:#000;width:20px;height:20px;padding:0;display:flex;align-items:center;justify-content:center}.-esm-ugandaemr-exchange__chatbot-button__botButton___d0Ro4{background-color:#005d5d;border:none;cursor:pointer;transition:background-color .3s,box-shadow .3s;display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;margin-left:.5rem;border-radius:50%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19)}.-esm-ugandaemr-exchange__chatbot-button__botButton___d0Ro4:hover{background-color:#066e6e;box-shadow:0 8px 16px 0 rgba(0,0,0,.2),0 12px 40px 0 rgba(0,0,0,.24)}.-esm-ugandaemr-exchange__chatbot-button__botButton___d0Ro4 svg{fill:#fff}.-esm-ugandaemr-exchange__chatbot-button__chatOpen___VlRao{display:block}.-esm-ugandaemr-exchange__chatbot-button__chatClosed___zxlii{display:none}","",{version:3,sources:["webpack://./src/root.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/components/workspace/chatbot/chatbot-button.scss"],names:[],mappings:"AAEA,4DACI,qBCuHM,CDtHN,yBAAA,CAGJ,uFACI,qCAAA,CE4CJ,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,yEACI,cAAA,CACA,WAAA,CACA,UAAA,CACA,YAAA,CACA,kBAAA,CACA,4IACI,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CAEJ,uIACI,cAAA,CAEJ,uIACI,eAAA,CACA,wBAAA,CACA,kBAAA,CACA,iBAAA,CACA,QAAA,CACA,OAAA,CACA,gCAAA,CACA,cAAA,CACA,iBAAA,CACA,aAAA,CACA,UAAA,CACA,UAAA,CACA,WAAA,CACA,SAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CAIR,4DACI,wBAAA,CACA,WAAA,CACA,cAAA,CACA,8CAAA,CACA,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,YAAA,CACA,aAAA,CACA,iBAAA,CACA,iBAAA,CACA,kEAAA,CACA,kEACI,wBAAA,CACA,oEAAA,CAEJ,gEACI,SAAA,CAIR,2DACI,aAAA,CAGJ,6DACI,YAAA",sourceRoot:""}]),r.locals={container:"-esm-ugandaemr-exchange__chatbot-button__container___POUWG",chatbotButtonContainer:"-esm-ugandaemr-exchange__chatbot-button__chatbotButtonContainer____CdkC",messageContainer:"-esm-ugandaemr-exchange__chatbot-button__messageContainer___SHkJD",chatbotText:"-esm-ugandaemr-exchange__chatbot-button__chatbotText___xuKqG",closeButton:"-esm-ugandaemr-exchange__chatbot-button__closeButton___yV7Jo",botButton:"-esm-ugandaemr-exchange__chatbot-button__botButton___d0Ro4",chatOpen:"-esm-ugandaemr-exchange__chatbot-button__chatOpen___VlRao",chatClosed:"-esm-ugandaemr-exchange__chatbot-button__chatClosed___zxlii"};const c=r},9968:(e,t,n)=>{n.d(t,{Z:()=>c});var A=n(7537),a=n.n(A),o=n(3645),r=n.n(o)()(a());r.push([e.id,"*{margin:0;padding:0;box-sizing:border-box}.-esm-ugandaemr-exchange__chatbot__chatbotContainer___TmeMm{position:fixed;width:24rem;height:26rem;right:.25rem;bottom:1.25rem;margin-right:1rem;border-radius:1rem;overflow:hidden;box-shadow:0 0 8rem 0 rgba(0,0,0,.1),0 2rem 4rem -3rem rgba(0,0,0,.5);background-color:#f5f5f5}.-esm-ugandaemr-exchange__chatbot__chatbotHeader___i8USA{background-color:#005d5d;padding:1rem 0;text-align:center;color:#fff;font-size:large}.-esm-ugandaemr-exchange__chatbot__chatbotHeader___i8USA .-esm-ugandaemr-exchange__chatbot__arrowButton___kDnD9{border:none;background-color:rgba(0,0,0,0);color:#fff;right:25px;position:absolute;cursor:pointer}.-esm-ugandaemr-exchange__chatbot__chatbotHeader___i8USA .-esm-ugandaemr-exchange__chatbot__refreshButton___SeuoD{border:none;background-color:rgba(0,0,0,0);color:#fff;position:absolute;right:55px;cursor:pointer}.-esm-ugandaemr-exchange__chatbot__chatBox___I9Xha{height:15rem;overflow-y:auto;padding:1.875rem 1.25rem 0}.-esm-ugandaemr-exchange__chatbot__chat___GJy6p{display:flex}.-esm-ugandaemr-exchange__chatbot__incoming___TYmTv span{height:1.5rem;width:2rem;color:#fff;align-self:flex-end;background-color:#005d5d;text-align:center;line-height:2rem;border-radius:.25rem;margin:0 .625rem .4375rem 0}.-esm-ugandaemr-exchange__chatbot__outgoing___dw4QT{margin:1.25rem 0;justify-content:flex-end}.-esm-ugandaemr-exchange__chatbot__chat___GJy6p p{color:#fff;max-width:75%;padding:.75rem 1rem;border-radius:.625rem .625rem 0 .625rem;background-color:#005d5d}.-esm-ugandaemr-exchange__chatbot__incoming___TYmTv p{color:#000;background-color:#fff;border-radius:.625rem .625rem 0 .625rem}.-esm-ugandaemr-exchange__chatbot__chatbotInput___XV6nI{position:absolute;bottom:0;width:100%;display:flex;gap:5px;background-color:#fff;padding:.5rem 1.25rem;border-top:1px solid #ccc}.-esm-ugandaemr-exchange__chatbot__chatbotInput___XV6nI textarea{height:3.5rem;width:100%;border:none;outline:none;resize:none;padding:1rem .9375rem 1rem 0}.-esm-ugandaemr-exchange__chatbot__chatbotInput___XV6nI span{align-self:flex-end;cursor:pointer;background-color:rgba(0,0,0,0);border:none;visibility:hidden}.-esm-ugandaemr-exchange__chatbot__chatbotInput___XV6nI textarea:valid~span{visibility:visible}","",{version:3,sources:["webpack://./src/components/workspace/chatbot/chatbot.scss"],names:[],mappings:"AAAC,EACI,QAAA,CACA,SAAA,CACA,qBAAA,CAGJ,4DACI,cAAA,CACA,WAAA,CACA,YAAA,CACA,YAAA,CACA,cAAA,CACA,iBAAA,CACA,kBAAA,CACA,eAAA,CACA,qEAAA,CACA,wBAAA,CAGJ,yDACI,wBAAA,CACA,cAAA,CACA,iBAAA,CACA,UAAA,CACA,eAAA,CACA,gHACI,WAAA,CACA,8BAAA,CACA,UAAA,CACA,UAAA,CACA,iBAAA,CACA,cAAA,CAEJ,kHACI,WAAA,CACA,8BAAA,CACA,UAAA,CACA,iBAAA,CACA,UAAA,CACA,cAAA,CAIR,mDACI,YAAA,CACA,eAAA,CACA,0BAAA,CAGJ,gDACI,YAAA,CAGJ,yDACI,aAAA,CACA,UAAA,CACA,UAAA,CACA,mBAAA,CACA,wBAAA,CACA,iBAAA,CACA,gBAAA,CACA,oBAAA,CACA,2BAAA,CAGJ,oDACI,gBAAA,CACA,wBAAA,CAGJ,kDACI,UAAA,CACA,aAAA,CACA,mBAAA,CACA,uCAAA,CACA,wBAAA,CAGJ,sDACI,UAAA,CACA,qBAAA,CACA,uCAAA,CAGJ,wDACI,iBAAA,CACA,QAAA,CACA,UAAA,CACA,YAAA,CACA,OAAA,CACA,qBAAA,CACA,qBAAA,CACA,yBAAA,CAGJ,iEACI,aAAA,CACA,UAAA,CACA,WAAA,CACA,YAAA,CACA,WAAA,CACA,4BAAA,CAGJ,6DACI,mBAAA,CACA,cAAA,CACA,8BAAA,CACA,WAAA,CACA,iBAAA,CAGJ,4EACI,kBAAA",sourceRoot:""}]),r.locals={chatbotContainer:"-esm-ugandaemr-exchange__chatbot__chatbotContainer___TmeMm",chatbotHeader:"-esm-ugandaemr-exchange__chatbot__chatbotHeader___i8USA",arrowButton:"-esm-ugandaemr-exchange__chatbot__arrowButton___kDnD9",refreshButton:"-esm-ugandaemr-exchange__chatbot__refreshButton___SeuoD",chatBox:"-esm-ugandaemr-exchange__chatbot__chatBox___I9Xha",chat:"-esm-ugandaemr-exchange__chatbot__chat___GJy6p",incoming:"-esm-ugandaemr-exchange__chatbot__incoming___TYmTv",outgoing:"-esm-ugandaemr-exchange__chatbot__outgoing___dw4QT",chatbotInput:"-esm-ugandaemr-exchange__chatbot__chatbotInput___XV6nI"};const c=r},6285:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});var A=n(1672),a=n.n(A),o=n(7410),r=n.n(o),c=n(4766),_=n.n(c),i=n(1991),s=n.n(i),u=n(3702),C=n.n(u),l=n(2434),m=n.n(l),d=n(1422),h=n.n(d),b=n(9968),g={};g.styleTagTransform=h(),g.setAttributes=C(),g.insert=s().bind(null,"head"),g.domAPI=_(),g.insertStyleElement=m(),r()(b.Z,g);const p=b.Z&&b.Z.locals?b.Z.locals:void 0;var f=n(601),x=n(3133),y=n(6811),B=n(8808),v=n(4268);function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,A=new Array(t);n<t;n++)A[n]=e[n];return A}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var A,a,o=[],r=!0,c=!1;try{for(n=n.call(e);!(r=(A=n.next()).done)&&(o.push(A.value),!t||o.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}const S=function(e){var t=e.closeChatbotChat,n=k((0,A.useState)(""),2),o=n[0],r=n[1],c=k((0,A.useState)([{type:"incoming",text:"Hi there\nHow can I help you today?"}]),2),_=c[0],i=c[1],s=k((0,A.useState)(!1),2),u=s[0],C=s[1],l=function(){var e={type:"outgoing",text:o};i(w(_).concat([e])),C(!0),setTimeout((function(){var e={type:"incoming",text:"This is a bot response."};i((function(t){return w(t).concat([e])})),C(!1)}),1e3),r("")},m=(0,A.useRef)(null);return(0,A.useEffect)((function(){m.current&&m.current.scrollIntoView({behavior:"smooth"})}),[_]),a().createElement("div",{className:p.chatbotContainer},a().createElement("div",{className:p.chatbotHeader},a().createElement("span",null,"Chatbot"),a().createElement("button",{onClick:function(){i([{type:"incoming",text:"Hi there\nHow can I help you today?"}])},className:p.refreshButton},a().createElement(f.CQ,null)),a().createElement("button",{onClick:t,className:p.arrowButton},a().createElement(x._M,null))),a().createElement("ul",{className:p.chatBox},_.map((function(e,t){return a().createElement("li",{key:t,ref:t===_.length-1?m:null,className:"".concat(p[e.type]," ").concat(p.chat)},"incoming"===e.type&&a().createElement("span",null,a().createElement(y.Sw,{size:"24"})),a().createElement("p",null,e.text))})),u&&a().createElement(v.lSo,{status:"active",iconDescription:"Loading",description:"Loading..."})),a().createElement("div",{className:p.chatbotInput},a().createElement("textarea",{placeholder:"Message Chatbot...",required:!0,onChange:function(e){r(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),l())},id:"content",value:o}),a().createElement("span",null,a().createElement(B.K5,{size:32,onClick:l}))))}},530:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var A=n(1672),a=n.n(A),o=n(3397),r=n(6285),c=n(7410),_=n.n(c),i=n(4766),s=n.n(i),u=n(1991),C=n.n(u),l=n(3702),m=n.n(l),d=n(2434),h=n.n(d),b=n(1422),g=n.n(b),p=n(8151),f={};f.styleTagTransform=g(),f.setAttributes=m(),f.insert=C().bind(null,"head"),f.domAPI=s(),f.insertStyleElement=h(),_()(p.Z,f);const x=p.Z&&p.Z.locals?p.Z.locals:void 0;var y=n(1132),B=n(3133);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,A=new Array(t);n<t;n++)A[n]=e[n];return A}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var A,a,o=[],r=!0,c=!1;try{for(n=n.call(e);!(r=(A=n.next()).done)&&(o.push(A.value),!t||o.length!==t);r=!0);}catch(e){c=!0,a=e}finally{try{r||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const k=function(){var e,t=(0,o.useTranslation)().t,n=I((0,A.useState)(!1),2),c=n[0],_=n[1],i=I((0,A.useState)(!0),2),s=i[0],u=i[1],C=(0,y.useSession)(),l=t("ifhis","IFHIS"),m=I((0,A.useState)(""),2),d=m[0],h=m[1],b=(0,A.useCallback)((function(){_(!0),u(!1)}),[]),g=(0,A.useCallback)((function(){u(!1)}),[]),p=(0,A.useCallback)((function(){_(!1)}),[]);return(0,A.useEffect)((function(){var e;(function(e){var t=new AbortController;return(0,y.openmrsFetch)("/ws/rest/v1/provider?q=".concat(e,"&v=full"),{method:"GET",headers:{"Content-Type":"application/json"},signal:t.signal})})(null==C||null===(e=C.user)||void 0===e?void 0:e.systemId).then((function(e){var t,n=null==e||null===(t=e.data)||void 0===t?void 0:t.results[0];h(n.person.display)}),(function(e){(0,y.showNotification)({title:t("errorGettingProvider', 'Couldn't get provider"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))}),[null==C||null===(e=C.user)||void 0===e?void 0:e.systemId,t]),a().createElement("div",{className:x.chatbotButtonContainer},s&&a().createElement("div",{className:x.messageContainer},a().createElement("span",{className:x.chatbotText},"Hello ",d,", Welcome to ",l," Chatbot"),a().createElement("button",{className:x.closeButton,onClick:g},"x")),a().createElement("button",{onClick:b,className:x.botButton,type:"button"},a().createElement(B.PS,{size:24})),a().createElement("div",{className:c?x.chatOpen:x.chatClosed},a().createElement(r.default,{closeChatbotChat:p})))}}}]);