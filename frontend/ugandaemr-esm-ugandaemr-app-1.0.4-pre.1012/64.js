"use strict";(globalThis.webpackChunk_ugandaemr_esm_ugandaemr_app=globalThis.webpackChunk_ugandaemr_esm_ugandaemr_app||[]).push([[64],{659:(e,n,t)=>{t.d(n,{Z:()=>l});var r=t(5579),a=t.n(r),o=t(6629),i=t.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-ugandaemr__system-info__overall-info-card___GX-43{display:flex;flex-direction:column;justify-content:center;align-items:center;border:.5px solid #c6c6c6;max-width:28%;padding:1rem}.-esm-ugandaemr__system-info__overall-info-card___GX-43 .-esm-ugandaemr__system-info__info-title___flpCI{display:flex;align-items:center;padding-bottom:.25rem;margin-bottom:.25rem;border-bottom:.5px solid #c6c6c6;width:100%;justify-content:center}.-esm-ugandaemr__system-info__overall-info-card___GX-43 .-esm-ugandaemr__system-info__info-body___qf-s0{display:grid;grid-template-columns:1fr 1fr;column-gap:.25rem;font-size:90%}.-esm-ugandaemr__system-info__overall-info-card___GX-43 .-esm-ugandaemr__system-info__divUpdateContent___ek3AY{display:flex}.-esm-ugandaemr__system-info__system-info-table___2LO0D{width:90%;margin:0 auto;margin-top:1.5rem;border:.5px solid #c6c6c6}.-esm-ugandaemr__system-info__results___zdAFd{margin-top:2rem;display:grid;grid-template-columns:1fr 1fr;column-gap:.8rem}.-esm-ugandaemr__system-info__no-results___EnbPj{margin-top:2rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/pages/system-info/system-info.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCtDF,wDACI,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,kBAAA,CACA,yBAAA,CACA,aAAA,CACA,YAAA,CACA,yGACI,YAAA,CACA,kBAAA,CACA,qBAAA,CACA,oBAAA,CACA,gCAAA,CACA,UAAA,CACA,sBAAA,CAEJ,wGACI,YAAA,CACA,6BAAA,CACA,iBAAA,CACA,aAAA,CAEJ,+GACI,YAAA,CAIR,wDACI,SAAA,CACA,aAAA,CACA,iBAAA,CACA,yBAAA,CAGJ,8CACI,eAAA,CACA,YAAA,CACA,6BAAA,CACA,gBAAA,CAGJ,iDACI,eAAA",sourcesContent:["$ui-01: #f4f4f4;\n$ui-02: #ffffff;\n$ui-03: #e0e0e0;\n$ui-04: #8d8d8d;\n$ui-05: #161616;\n$text-02: #525252;\n$text-03: #a8a8a8;\n$ui-background: #ffffff;\n$color-gray-30: #c6c6c6;\n$color-gray-70: #525252;\n$color-gray-100: #161616;\n$color-blue-60-2: #0f62fe;\n$color-blue-10: #edf5ff;\n$color-yellow-50: #feecae;\n$carbon--red-50: #fa4d56;\n$inverse-link: #78a9ff;\n$support-02: #24a148;\n$inverse-support-03: #f1c21b;\n$warning-background: #fff8e1;\n$openmrs-background-grey: #f4f4f4;\n$danger: #da1e28;\n$interactive-01: #0f62fe;\n$field-01: #f4f4f4;\n$grey-2: #e0e0e0;\n$labeldropdown: #c6c6c6;\n\n$brand-primary-10: #d9fbfb;\n$brand-primary-20: #9ef0f0;\n$brand-primary-30: #3ddbd9;\n$brand-primary-40: #08bdba;\n$brand-primary-50: #009d9a;\n\n/* 60,70 and 80 are already declared as brand-01, 02 and 03 respectively */\n\n$brand-primary-90: #022b30;\n$brand-primary-100: #081a1c;\n\n@mixin brand-01($property) {\n  #{$property}: #005d5d;\n  #{$property}: var(--brand-01);\n}\n\n@mixin brand-02($property) {\n  #{$property}: #004144;\n  #{$property}: var(--brand-02);\n}\n\n@mixin brand-03($property) {\n  #{$property}: #007d79;\n  #{$property}: var(--brand-03);\n}\n\n:root {\n  --brand-01: #005d5d;\n  --brand-02: #004144;\n  --brand-03: #007d79;\n}\n\n$breakpoint-phone-min: 0px;\n$breakpoint-phone-max: 600px;\n$breakpoint-tablet-min: 601px;\n$breakpoint-tablet-max: 1023px;\n$breakpoint-small-desktop-min: 1024px;\n$breakpoint-small-desktop-max: 1439px;\n$breakpoint-large-desktop-min: 1440px;\n$breakpoint-large-desktop-max: 99999999px;\n\n/* These color variables will be removed in a future release */\n$brand-teal-01: #007d79;\n$brand-01: #005d5d;\n$brand-02: #004144;\n","@import '~@openmrs/esm-styleguide/src/vars';\n.overall-info-card {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border: 0.5px solid #c6c6c6;\n    max-width: 28%;\n    padding: 1rem;\n    .info-title {\n        display: flex;\n        align-items: center;\n        padding-bottom: 0.25rem;\n        margin-bottom: 0.25rem;\n        border-bottom: 0.5px solid #c6c6c6;\n        width: 100%;\n        justify-content: center;\n    }\n    .info-body {\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        column-gap: 0.25rem;\n        font-size: 90%;\n    }\n    .divUpdateContent {\n        display: flex;\n    }\n}\n\n.system-info-table {\n    width: 90%;\n    margin: 0 auto;\n    margin-top: 1.5rem;\n    border: 0.5px solid #c6c6c6;\n}\n\n.results {\n    margin-top: 2rem;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    column-gap: 0.8rem;\n}\n\n.no-results {\n    margin-top: 2rem;\n}\n\n// add css for different screen sizes"],sourceRoot:""}]),i.locals={"overall-info-card":"-esm-ugandaemr__system-info__overall-info-card___GX-43","info-title":"-esm-ugandaemr__system-info__info-title___flpCI","info-body":"-esm-ugandaemr__system-info__info-body___qf-s0",divUpdateContent:"-esm-ugandaemr__system-info__divUpdateContent___ek3AY","system-info-table":"-esm-ugandaemr__system-info__system-info-table___2LO0D",results:"-esm-ugandaemr__system-info__results___zdAFd","no-results":"-esm-ugandaemr__system-info__no-results___EnbPj"};const l=i},6210:(e,n,t)=>{t.d(n,{Z:()=>b});var r=t(1354),a=t.n(r),o=t(1583),i=t.n(o),l=t(7378),s=t.n(l),c=t(5993),u=t.n(c),d=t(4154),f=t.n(d),m=t(8141),p=t.n(m),y=t(659),A={};A.styleTagTransform=p(),A.setAttributes=u(),A.insert=s().bind(null,"head"),A.domAPI=i(),A.insertStyleElement=f(),a()(y.Z,A);const b=y.Z&&y.Z.locals?y.Z.locals:void 0},4533:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var r=t(268),a=t.n(r),o=t(4924),i=t(4507),l=t(1e3),s=t(7765),c=t(6210);const u=t.p+"2c19de87a1903c23.png";var d=t(8524);function f(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}const m=function(e){var n=e.facilityCodeDetails,t=e.setFacilityCodeDetails,s=(0,o.useTranslation)().t,c=(0,r.useCallback)((function(){var e=(0,l.showModal)("retrieve-facility-code-modal",{closeModal:function(){return e()},facilityCodeDetails:n,setFacilityCodeDetails:t})}),[n,t]);return a().createElement(i.zxk,{kind:"ghost",size:"sm",onClick:c,iconDescription:s("updateFacilityCodeButton","Update Facility Code Button"),renderIcon:function(e){return a().createElement(d.Sl,function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){f(e,n,t[n])}))}return e}({size:16},e))}},null===n.value?"Update Facility Code":"Edit Facility Code")};var p=t(5552);function y(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){A(e,n,t[n])}))}return e}function g(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==t.return||t.return()}finally{if(l)throw a}}return o}}(e,n)||function(e,n){if(e){if("string"==typeof e)return y(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=function(e){var n=e.buildInfo,t=e.emrVersion,r=e.facilityCodeDetails,s=e.setFacilityCodeDetails,d=(0,o.useTranslation)().t,f=n&&n["".concat(p.$w)]?"".concat(n["".concat(p.$w)],", ").concat(n["".concat(p.g9)]):"-";return a().createElement(i.rjZ,{className:c.Z["overall-info-card"]},a().createElement(i.sgG,{className:c.Z["info-title"]},a().createElement(i.sgG,null,a().createElement("p",null,d("governmentOfUganda","Government of Uganda")),a().createElement("p",null,d("ministryOfHealth","Ministry of Health"))),a().createElement(i.sgG,null,a().createElement("img",{src:u,alt:"Govt of Uganda Coat of Arms",height:50}))),a().createElement(i.sgG,{className:c.Z["info-body"]},a().createElement("span",null,"Uganda EMR+ Version"),a().createElement("span",null,t),a().createElement("span",null,"SPA Version"),a().createElement("span",null,"v5.1.0"),a().createElement("span",null,"Build date time"),a().createElement("span",null,f),a().createElement("span",null,"Facility code"),a().createElement("span",null,null===r.value?"-":r.value)),a().createElement("div",{className:c.Z.divUpdateContent},a().createElement(l.UserHasAccess,{privilege:p.y2},a().createElement(i.sgG,null,a().createElement(m,{facilityCodeDetails:r,setFacilityCodeDetails:s})))))};function v(e){var n=e.moduleInfo,t=e.error,r=e.loading,s=(0,o.useTranslation)().t,u=a().useMemo((function(){return e=n,t=[],Object.keys(e).forEach((function(n,r){return t.push({id:r,module_name:n,version_number:e[n]})})),t;var e,t}),[n]);return r?a().createElement(i.gqd,{className:c.Z["system-info-table"],role:"progressbar"}):t?a().createElement(l.ErrorState,{headerTitle:s("errorFetchingSytemInformation","Error fetching system information"),error:t}):n?a().createElement(i.wQF,{rows:u,headers:[{header:"Module Name",key:"module_name"},{header:"Version Number",key:"version_number"}]},(function(e){var n,t,r=e.rows,o=e.headers,l=e.getTableProps,s=e.getHeaderProps,u=e.getRowProps;return a().createElement(i.iA_,(n=b({},l()),t=null!=(t={className:c.Z["system-info-table"]})?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})),n),a().createElement(i.ssF,null,a().createElement(i.SCH,null,o.map((function(e){return a().createElement(i.xDH,s({header:e}),e.header)})))),a().createElement(i.RMI,null,r.map((function(e){return a().createElement(i.SCH,u({row:e}),e.cells.map((function(e){return a().createElement(i.pj1,{key:e.id},e.value)})))}))))})):void 0}const C=function(){var e=(0,o.useTranslation)().t,n=g((0,r.useState)({}),2),t=n[0],c=n[1],u=g((0,r.useState)({}),2),d=u[0],f=u[1],m=g((0,r.useState)("4.0"),2),y=m[0],A=m[1],C=(0,s.b_)(),h=C.systemInfo,w=C.isError,E=C.isLoading,$=g((0,r.useState)({value:null}),2),k=$[0],x=$[1],O=(0,s.l7)().facilityIds;(0,r.useEffect)((function(){O&&O.length&&x({value:O[0].value})}),[O]);var j=(0,r.useCallback)((function(){k.value&&(0,s.lf)("".concat(p.$U),k.value).then((function(n){var t;(0,l.showSnackbar)({isLowContrast:!0,kind:"success",title:e("Updating Facility Code","Updating Facility Code"),subtitle:e("UpdatingFacilityCode","Updated Facility Code ".concat(null===(t=n)||void 0===t?void 0:t.value)),autoClose:!0})}),(function(n){var t;(0,l.showNotification)({title:e("errorUpdatingFacilityCode","Could not update facility code"),kind:"error",critical:!0,description:null===(t=n)||void 0===t?void 0:t.message,millis:3e3})}))}),[k.value,e]);return(0,r.useEffect)((function(){k.value&&j()}),[k.value,j]),(0,r.useEffect)((function(){if(h){var e=b({},h.systemInfo["SystemInfo.title.moduleInformation"]);delete e["SystemInfo.Module.repositoryPath"],c(e),f(h.systemInfo["SystemInfo.title.openmrsInformation"])}}),[h]),(0,r.useEffect)((function(){t&&A(t.UgandaEMR)}),[t]),a().createElement(i.n9L,null,a().createElement(_,{buildInfo:d,emrVersion:y,facilityCodeDetails:k,setFacilityCodeDetails:x}),a().createElement(v,{moduleInfo:t,error:w,loading:E}))}},7765:(e,n,t)=>{t.d(n,{b_:()=>m,l7:()=>p,lf:()=>d,tG:()=>u});var r=t(1862),a=t(9346),o=t(1e3),i=t(5552);function l(e,n,t,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void t(e)}l.done?n(s):Promise.resolve(s).then(r,a)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){l(o,r,a,i,s,"next",e)}function s(e){l(o,r,a,i,s,"throw",e)}i(void 0)}))}}function c(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(o){return function(l){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(e){o=[6,e],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}function u(e){var n,t,o,i="https://api-nhfr.health.go.ug/NHFRSearch?resource=".concat(e.resource,"&name=").concat(e.name),l=(o=s((function(){var e;return c(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,a.Z.get(i,{headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent().data];case 2:throw e=n.sent(),new Error("Error in fetcher: ".concat(e.message));case 3:return[2]}}))})),function(){return o.apply(this,arguments)}),u=(0,r.ZP)(i,l),d=u.data,f=u.error;return{data:null===(t=d)||void 0===t||null===(n=t.entry)||void 0===n?void 0:n.filter((function(e){var n,t,r;return null===(r=e)||void 0===r||null===(t=r.resource)||void 0===t||null===(n=t.extension)||void 0===n?void 0:n.find((function(e){return"levelOfCare"===e.url}))})),isLoading:!f&&!d,isError:f}}function d(e,n){return f.apply(this,arguments)}function f(){return(f=s((function(e,n){var t,r,a;return c(this,(function(i){switch(i.label){case 0:t=new AbortController,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,o.openmrsFetch)("/ws/rest/v1/systemsetting/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},signal:t.signal,body:JSON.stringify({value:n})})];case 2:if(!(r=i.sent()).ok)throw new Error("Failed to update property value: ".concat(r.statusText));return[2,r.json()];case 3:throw a=i.sent(),new Error("Error in updatePropertyValue: ".concat(a.message));case 4:return[2]}}))}))).apply(this,arguments)}function m(){var e,n=(0,r.ZP)("/ws/rest/v1/systeminformation?v=full",o.openmrsFetch),t=n.data,a=n.error,i=n.isLoading;return{systemInfo:null===(e=t)||void 0===e?void 0:e.data,isLoading:i,isError:a}}function p(){var e,n="/ws/rest/v1/systemsetting?q=".concat(i.$U,"&v=full"),t=(0,r.ZP)(n,o.openmrsFetch),a=t.data,l=t.error,s=t.isLoading;return{facilityIds:null===(e=a)||void 0===e?void 0:e.data.results,isLoading:s,isError:l}}}}]);