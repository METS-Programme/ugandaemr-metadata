"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[5645],{1977:(e,n,t)=>{t.d(n,{A:()=>r});var a=t(977),i=t.n(a),l=t(5924),o=t.n(l)()(i());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79;--bottom-nav-height: 4rem;--workspace-header-height: 3rem;--tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));--desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height))}.-esm-patient-allergies__allergy-form__header___P7zvd{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-patient-allergies__allergy-form__content___iEv8G{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem}.-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt fieldset{display:grid;grid-template-columns:1fr 1fr;width:100%}.-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt .cds--radio-button__label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__radio___XTKxu{margin:1rem 0}.-esm-patient-allergies__allergy-form__radio___XTKxu label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__checkbox___0Cnkb:not(:first-child){margin:.3rem 0}.-esm-patient-allergies__allergy-form__checkboxContainer___XnRHC{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-allergies__allergy-form__button___NWHJX{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-allergies__allergy-form__button___NWHJX .cds--inline-loading{min-height:1rem !important}.-esm-patient-allergies__allergy-form__button___NWHJX .cds--inline-loading__text{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-allergies__allergy-form__desktopButtons___OHQg0{margin-top:2rem}.-esm-patient-allergies__allergy-form__tabletButtons___jiQUo{margin-top:2rem;padding:1.5rem 1rem;background-color:#fff}.-esm-patient-allergies__allergy-form__actionButtons___Dg6RD{position:sticky;bottom:0}.-esm-patient-allergies__allergy-form__formContainer___Av8l2{height:100%}.-esm-patient-allergies__allergy-form__formContent___IqWxT{margin:1rem}.-esm-patient-allergies__allergy-form__form___qXnav{display:flex;flex-direction:column;justify-content:space-between}.omrs-breakpoint-gt-tablet .-esm-patient-allergies__allergy-form__form___qXnav{height:100%}.omrs-breakpoint-lt-desktop .-esm-patient-allergies__allergy-form__form___qXnav{height:calc(100vh - 9rem)}.-esm-patient-allergies__allergy-form__loaderContainer___p5X8M{height:100vh}.-esm-patient-allergies__allergy-form__loading___9VLsU{display:flex;justify-content:center;align-items:center;min-height:50%}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-form/allergy-form.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAsDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CACA,yBAAA,CACA,+BAAA,CACA,oGAAA,CACA,2GAAA,CCzDF,sDACE,oCAAA,CACA,QAAA,CAGF,uDACE,YAAA,CACA,iCAAA,CACA,iBAAA,CAGF,yEACE,YAAA,CACA,6BAAA,CACA,UAAA,CAGF,0FACE,0BAAA,CAGF,qDACE,aAAA,CAEA,2DACE,0BAAA,CAKF,0EACE,cAAA,CAIJ,iEACE,YAAA,CACA,6BAAA,CAGF,sDACE,WCWW,CDVX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAEA,2EACE,0BAAA,CAGF,iFE2yBE,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CFtyBJ,8DACE,eCpBW,CDuBb,6DACE,eCxBW,CDyBX,mBAAA,CACA,qBDhEM,CCmER,6DACE,eAAA,CACA,QAAA,CAGF,6DACE,WAAA,CAGF,2DACE,WCjDW,CDoDb,oDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CAKA,+EACE,WAAA,CAMF,gFACE,yBAAA,CAIJ,+DACE,YAAA,CAGF,uDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA",sourcesContent:["@use '@carbon/layout';\n\n$ui-01: #f4f4f4;\n$ui-02: #ffffff;\n$ui-03: #e0e0e0;\n$ui-04: #8d8d8d;\n$ui-05: #161616;\n$text-02: #525252;\n$text-03: #a8a8a8;\n$ui-background: #ffffff;\n$color-gray-30: #c6c6c6;\n$color-gray-70: #525252;\n$color-gray-100: #161616;\n$color-blue-60-2: #0f62fe;\n$color-blue-10: #edf5ff;\n$color-yellow-50: #feecae;\n$carbon--red-50: #fa4d56;\n$inverse-link: #78a9ff;\n$support-02: #24a148;\n$inverse-support-03: #f1c21b;\n$warning-background: #fff8e1;\n$openmrs-background-grey: #f4f4f4;\n$danger: #da1e28;\n$interactive-01: #0f62fe;\n$field-01: #f4f4f4;\n$grey-2: #e0e0e0;\n$labeldropdown: #c6c6c6;\n\n$brand-primary-10: #d9fbfb;\n$brand-primary-20: #9ef0f0;\n$brand-primary-30: #3ddbd9;\n$brand-primary-40: #08bdba;\n$brand-primary-50: #009d9a;\n\n/* 60,70 and 80 are already declared as brand-01, 02 and 03 respectively */\n\n$brand-primary-90: #022b30;\n$brand-primary-100: #081a1c;\n\n@mixin brand-01($property) {\n  #{$property}: #005d5d;\n  #{$property}: var(--brand-01);\n}\n\n@mixin brand-02($property) {\n  #{$property}: #004144;\n  #{$property}: var(--brand-02);\n}\n\n@mixin brand-03($property) {\n  #{$property}: #007d79;\n  #{$property}: var(--brand-03);\n}\n\n:root {\n  --brand-01: #005d5d;\n  --brand-02: #004144;\n  --brand-03: #007d79;\n  --bottom-nav-height: #{layout.$spacing-10};\n  --workspace-header-height: #{layout.$spacing-09};\n  --tablet-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--bottom-nav-height));\n  --desktop-workspace-window-height: calc(100vh - var(--omrs-navbar-height) - var(--workspace-header-height));\n}\n\n$breakpoint-phone-min: 0px;\n$breakpoint-phone-max: 600px;\n$breakpoint-tablet-min: 601px;\n$breakpoint-tablet-max: 1023px;\n$breakpoint-small-desktop-min: 1024px;\n$breakpoint-small-desktop-max: 1439px;\n$breakpoint-large-desktop-min: 1440px;\n$breakpoint-large-desktop-max: 99999999px;\n\n/* These color variables will be removed in a future release */\n$brand-teal-01: #007d79;\n$brand-01: #005d5d;\n$brand-02: #004144;\n","@use '@carbon/layout';\n@use '@carbon/type';\n@use '@openmrs/esm-styleguide/src/vars' as *;\n\n.header {\n  border-bottom: 0.0625rem solid $grey-2;\n  margin: 0;\n}\n\n.content {\n  display: grid;\n  grid-template-columns: 50% 10% 1fr;\n  margin: layout.$spacing-03 layout.$spacing-05;\n}\n\n.wrapperContainer fieldset {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  width: 100%;\n}\n\n.wrapperContainer :global(.cds--radio-button__label) {\n  justify-content: flex-start;\n}\n\n.radio {\n  margin: layout.$spacing-05 0;\n\n  label {\n    justify-content: flex-start;\n  }\n}\n\n.checkbox {\n  &:not(:first-child) {\n    margin: 0.3rem 0;\n  }\n}\n\n.checkboxContainer {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n}\n\n.button {\n  height: layout.$spacing-10;\n  display: flex;\n  align-content: flex-start;\n  align-items: baseline;\n  min-width: 50%;\n\n  :global(.cds--inline-loading) {\n    min-height: layout.$spacing-05 !important;\n  }\n\n  :global(.cds--inline-loading__text) {\n    @include type.type-style('body-01');\n  }\n}\n\n.desktopButtons {\n  margin-top: layout.$spacing-07;\n}\n\n.tabletButtons {\n  margin-top: layout.$spacing-07;\n  padding: layout.$spacing-06 layout.$spacing-05;\n  background-color: $ui-02;\n}\n\n.actionButtons {\n  position: sticky;\n  bottom: 0;\n}\n\n.formContainer {\n  height: 100%;\n}\n\n.formContent {\n  margin: layout.$spacing-05;\n}\n\n.form {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n\n/* Desktop */\n:global(.omrs-breakpoint-gt-tablet) {\n  .form {\n    height: 100%;\n  }\n}\n\n/* Tablet */\n:global(.omrs-breakpoint-lt-desktop) {\n  .form {\n    height: calc(100vh - 9rem);\n  }\n}\n\n.loaderContainer {\n  height: 100vh;\n}\n\n.loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 50%;\n}\n","// Code generated by @carbon/layout. DO NOT EDIT.\n//\n// Copyright IBM Corp. 2018, 2023\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-01: 0.125rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-02: 0.25rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-03: 0.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-04: 0.75rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-05: 1rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-06: 1.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-07: 2rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-08: 2.5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-09: 3rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-10: 4rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-11: 5rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-12: 6rem !default;\n\n/// @type Number\n/// @access public\n/// @group @carbon/layout\n$spacing-13: 10rem !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/layout\n$spacing: (\n  spacing-01: $spacing-01,\n  spacing-02: $spacing-02,\n  spacing-03: $spacing-03,\n  spacing-04: $spacing-04,\n  spacing-05: $spacing-05,\n  spacing-06: $spacing-06,\n  spacing-07: $spacing-07,\n  spacing-08: $spacing-08,\n  spacing-09: $spacing-09,\n  spacing-10: $spacing-10,\n  spacing-11: $spacing-11,\n  spacing-12: $spacing-12,\n  spacing-13: $spacing-13,\n);\n","//\n// Copyright IBM Corp. 2018, 2023\n//\n// This source code is licensed under the Apache-2.0 license found in the\n// LICENSE file in the root directory of this source tree.\n//\n\n// stylelint-disable number-max-precision\n\n@use 'sass:map';\n@use 'sass:math';\n@use '@carbon/grid/scss/config' as gridconfig;\n@use '@carbon/grid/scss/breakpoint' as grid;\n@use 'prefix' as *;\n@use 'font-family';\n@use 'scale';\n\n/// @type Map\n/// @access public\n/// @deprecated\n/// @group @carbon/type\n$caption-01: (\n  font-size: scale.type-scale(1),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.33333,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @deprecated\n/// @group @carbon/type\n$caption-02: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$label-01: (\n  font-size: scale.type-scale(1),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.33333,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$label-02: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$legal-01: (\n  font-size: scale.type-scale(1),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.33333,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$legal-02: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @deprecated\n/// @group @carbon/type\n$helper-text-01: (\n  font-size: scale.type-scale(1),\n  line-height: 1.33333,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @deprecated\n/// @group @carbon/type\n$helper-text-02: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-short-01: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-compact-01: $body-short-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-long-01: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.42857,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-01: $body-long-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-short-02: (\n  font-size: scale.type-scale(3),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.375,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-compact-02: $body-short-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-long-02: (\n  font-size: scale.type-scale(3),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.5,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$body-02: $body-long-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$code-01: (\n  font-family: font-family.font-family('mono'),\n  font-size: scale.type-scale(1),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.33333,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$code-02: (\n  font-family: font-family.font-family('mono'),\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.42857,\n  letter-spacing: 0.32px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-01: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.42857,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-01: (\n  font-size: scale.type-scale(2),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.28572,\n  letter-spacing: 0.16px,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-compact-01: $productive-heading-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-02: (\n  font-size: scale.type-scale(3),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.5,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-02: (\n  font-size: scale.type-scale(3),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.375,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-compact-02: $productive-heading-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-03: (\n  font-size: scale.type-scale(5),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.4,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-03: $productive-heading-03 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-04: (\n  font-size: scale.type-scale(7),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-04: $productive-heading-04 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-05: (\n  font-size: scale.type-scale(8),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.25,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-05: $productive-heading-05 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-06: (\n  font-size: scale.type-scale(10),\n  font-weight: font-family.font-weight('light'),\n  // Extra digit needed for precision in Chrome\n  line-height: 1.199,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-06: $productive-heading-06 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$productive-heading-07: (\n  font-size: scale.type-scale(12),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.19,\n  letter-spacing: 0,\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$heading-07: $productive-heading-07 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-01: $heading-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-02: $heading-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-03: (\n  font-size: scale.type-scale(5),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.4,\n  letter-spacing: 0,\n  breakpoints: (\n    xlg: (\n      font-size: scale.type-scale(5),\n      line-height: 1.4,\n    ),\n    max: (\n      font-size: scale.type-scale(6),\n      line-height: 1.334,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-heading-03: $expressive-heading-03 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-04: (\n  font-size: scale.type-scale(7),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.28572,\n  letter-spacing: 0,\n  breakpoints: (\n    xlg: (\n      font-size: scale.type-scale(8),\n      line-height: 1.25,\n      font-weight: font-family.font-weight('regular'),\n    ),\n    max: (\n      font-size: scale.type-scale(8),\n      font-weight: font-family.font-weight('regular'),\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-heading-04: $expressive-heading-04 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-05: (\n  font-size: scale.type-scale(8),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.25,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(9),\n      font-weight: font-family.font-weight('light'),\n      line-height: 1.22,\n    ),\n    lg: (\n      font-size: scale.type-scale(10),\n      line-height: 1.19,\n    ),\n    xlg: (\n      font-size: scale.type-scale(11),\n      line-height: 1.17,\n    ),\n    max: (\n      font-size: scale.type-scale(13),\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-heading-05: $expressive-heading-05 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-heading-06: (\n  font-size: scale.type-scale(8),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.25,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(9),\n      line-height: 1.22,\n    ),\n    lg: (\n      font-size: scale.type-scale(10),\n      line-height: 1.19,\n    ),\n    xlg: (\n      font-size: scale.type-scale(11),\n      line-height: 1.17,\n    ),\n    max: (\n      font-size: scale.type-scale(13),\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-heading-06: $expressive-heading-06 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$expressive-paragraph-01: (\n  font-size: scale.type-scale(6),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.334,\n  letter-spacing: 0,\n  breakpoints: (\n    lg: (\n      font-size: scale.type-scale(7),\n      line-height: 1.28572,\n    ),\n    max: (\n      font-size: scale.type-scale(8),\n      line-height: 1.25,\n    ),\n  ),\n);\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-paragraph-01: $expressive-paragraph-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$quotation-01: (\n  font-family: font-family.font-family('serif'),\n  font-size: scale.type-scale(5),\n  font-weight: font-family.font-weight('regular'),\n  line-height: 1.3,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(5),\n    ),\n    lg: (\n      font-size: scale.type-scale(6),\n      line-height: 1.334,\n    ),\n    xlg: (\n      font-size: scale.type-scale(7),\n      line-height: 1.28572,\n    ),\n    max: (\n      font-size: scale.type-scale(8),\n      line-height: 1.25,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-quotation-01: $quotation-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$quotation-02: (\n  font-family: font-family.font-family('serif'),\n  font-size: scale.type-scale(8),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.25,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(9),\n      line-height: 1.22,\n    ),\n    lg: (\n      font-size: scale.type-scale(10),\n      line-height: 1.19,\n    ),\n    xlg: (\n      font-size: scale.type-scale(11),\n      line-height: 1.17,\n    ),\n    max: (\n      font-size: scale.type-scale(13),\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-quotation-02: $quotation-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$display-01: (\n  font-size: scale.type-scale(10),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.19,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(10),\n    ),\n    lg: (\n      font-size: scale.type-scale(12),\n    ),\n    xlg: (\n      font-size: scale.type-scale(13),\n      line-height: 1.17,\n    ),\n    max: (\n      font-size: scale.type-scale(15),\n      line-height: 1.13,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-display-01: $display-01 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$display-02: (\n  font-size: scale.type-scale(10),\n  font-weight: font-family.font-weight('semibold'),\n  line-height: 1.19,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(10),\n    ),\n    lg: (\n      font-size: scale.type-scale(12),\n    ),\n    xlg: (\n      font-size: scale.type-scale(13),\n      line-height: 1.16,\n    ),\n    max: (\n      font-size: scale.type-scale(15),\n      line-height: 1.13,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-display-02: $display-02 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$display-03: (\n  font-size: scale.type-scale(10),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.19,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(12),\n      line-height: 1.18,\n    ),\n    lg: (\n      font-size: scale.type-scale(13),\n      line-height: 1.16,\n      letter-spacing: -0.64px,\n    ),\n    xlg: (\n      font-size: scale.type-scale(15),\n      line-height: 1.13,\n      letter-spacing: -0.64px,\n    ),\n    max: (\n      font-size: scale.type-scale(16),\n      line-height: 1.11,\n      letter-spacing: -0.96px,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-display-03: $display-03 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$display-04: (\n  font-size: scale.type-scale(10),\n  font-weight: font-family.font-weight('light'),\n  line-height: 1.19,\n  letter-spacing: 0,\n  breakpoints: (\n    md: (\n      font-size: scale.type-scale(14),\n      line-height: 1.15,\n    ),\n    lg: (\n      font-size: scale.type-scale(17),\n      line-height: 1.11,\n      letter-spacing: -0.64px,\n    ),\n    xlg: (\n      font-size: scale.type-scale(20),\n      line-height: 1.07,\n      letter-spacing: -0.64px,\n    ),\n    max: (\n      font-size: scale.type-scale(23),\n      line-height: 1.05,\n      letter-spacing: -0.96px,\n    ),\n  ),\n) !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$fluid-display-04: $display-04 !default;\n\n/// @type Map\n/// @access public\n/// @group @carbon/type\n$tokens: (\n  caption-01: $caption-01,\n  caption-02: $caption-02,\n  label-01: $label-01,\n  label-02: $label-02,\n  helper-text-01: $helper-text-01,\n  helper-text-02: $helper-text-02,\n  body-short-01: $body-short-01,\n  body-short-02: $body-short-02,\n  body-long-01: $body-long-01,\n  body-long-02: $body-long-02,\n  code-01: $code-01,\n  code-02: $code-02,\n  heading-01: $heading-01,\n  heading-02: $heading-02,\n  productive-heading-01: $productive-heading-01,\n  productive-heading-02: $productive-heading-02,\n  productive-heading-03: $productive-heading-03,\n  productive-heading-04: $productive-heading-04,\n  productive-heading-05: $productive-heading-05,\n  productive-heading-06: $productive-heading-06,\n  productive-heading-07: $productive-heading-07,\n  expressive-paragraph-01: $expressive-paragraph-01,\n  expressive-heading-01: $expressive-heading-01,\n  expressive-heading-02: $expressive-heading-02,\n  expressive-heading-03: $expressive-heading-03,\n  expressive-heading-04: $expressive-heading-04,\n  expressive-heading-05: $expressive-heading-05,\n  expressive-heading-06: $expressive-heading-06,\n  quotation-01: $quotation-01,\n  quotation-02: $quotation-02,\n  display-01: $display-01,\n  display-02: $display-02,\n  display-03: $display-03,\n  display-04: $display-04,\n  // V11 Tokens\n  legal-01: $legal-01,\n  legal-02: $legal-02,\n  body-compact-01: $body-compact-01,\n  body-compact-02: $body-compact-02,\n  heading-compact-01: $heading-compact-01,\n  heading-compact-02: $heading-compact-02,\n  body-01: $body-01,\n  body-02: $body-02,\n  heading-03: $heading-03,\n  heading-04: $heading-04,\n  heading-05: $heading-05,\n  heading-06: $heading-06,\n  heading-07: $heading-07,\n  fluid-heading-03: $fluid-heading-03,\n  fluid-heading-04: $fluid-heading-04,\n  fluid-heading-05: $fluid-heading-05,\n  fluid-heading-06: $fluid-heading-06,\n  fluid-paragraph-01: $fluid-paragraph-01,\n  fluid-quotation-01: $fluid-quotation-01,\n  fluid-quotation-02: $fluid-quotation-02,\n  fluid-display-01: $fluid-display-01,\n  fluid-display-02: $fluid-display-02,\n  fluid-display-03: $fluid-display-03,\n  fluid-display-04: $fluid-display-04,\n) !default;\n\n/// @param {Map} $map\n/// @access public\n/// @group @carbon/type\n@mixin properties($map) {\n  @each $name, $value in $map {\n    #{$name}: $value;\n  }\n}\n\n/// @param {Number} $value - Number with units\n/// @return {Number} Without units\n/// @access public\n/// @group @carbon/type\n@function strip-unit($value) {\n  @return math.div($value, $value * 0 + 1);\n}\n\n/// This helper includes fluid type styles for the given token value. Fluid type\n/// means that the `font-size` is computed using `calc()` in order to be\n/// determined by the screen size instead of a breakpoint. As a result, fluid\n/// styles should be used with caution in fixed width contexts.\n///\n/// In addition, we make use of %-based line-heights so that the line-height of\n/// each type style is computed correctly due to the dynamic nature of the\n/// `font-size`.\n///\n/// Most of the logic for this work comes from CSS Tricks:\n/// https://css-tricks.com/snippets/css/fluid-typography/\n///\n/// @param {Map} $type-styles - The value of a given type token\n/// @param {Map} $breakpoints [$grid-breakpoints] - Custom breakpoints to use\n/// @access public\n/// @group @carbon/type\n@mixin fluid-type($type-styles, $breakpoints: gridconfig.$grid-breakpoints) {\n  // Include the initial styles for the given token by default without any\n  // media query guard. This includes `font-size` as a fallback in the case\n  // that a browser does not support `calc()`\n  @include properties(map.remove($type-styles, breakpoints));\n  // We also need to include the `sm` styles by default since they don't\n  // appear in the fluid styles for tokens\n  @include fluid-type-size($type-styles, sm, $breakpoints);\n\n  // Finally, we need to go through all the breakpoints defined in the type\n  // token and apply the properties and fluid type size for that given\n  // breakpoint\n  @each $name, $values in map.get($type-styles, breakpoints) {\n    @include grid.breakpoint($name) {\n      @include properties($values);\n      @include fluid-type-size($type-styles, $name, $breakpoints);\n    }\n  }\n}\n\n/// Computes the fluid `font-size` for a given type style and breakpoint\n/// @param {Map} $type-styles - The styles for a given token\n/// @param {String} $name - The name of the breakpoint to which we apply the fluid\n/// @param {Map} $breakpoints [$grid-breakpoints] - The breakpoints for the grid system\n/// @access public\n/// @group @carbon/type\n@mixin fluid-type-size(\n  $type-styles,\n  $name,\n  $breakpoints: gridconfig.$grid-breakpoints\n) {\n  // Get the information about the breakpoint we're currently working in. Useful\n  // for getting initial width information\n  $breakpoint: map.get($breakpoints, $name);\n\n  // Our fluid styles are captured under the 'breakpoints' property in our type\n  // styles map. These define what values to treat as `max-` variables below\n  $fluid-sizes: map.get($type-styles, breakpoints);\n  $fluid-breakpoint: ();\n  // Special case for `sm` because the styles for small are on the type style\n  // directly\n  @if $name == sm {\n    $fluid-breakpoint: map.remove($type-styles, breakpoints);\n  } @else {\n    $fluid-breakpoint: map.get($fluid-sizes, $name);\n  }\n\n  // Initialize our font-sizes to the default size for the type style\n  $max-font-size: map.get($type-styles, font-size);\n  $min-font-size: map.get($type-styles, font-size);\n  @if map.has-key($fluid-breakpoint, font-size) {\n    $min-font-size: map.get($fluid-breakpoint, font-size);\n  }\n\n  // Initialize our min and max width to the width of the current breakpoint\n  $max-vw: map.get($breakpoint, width);\n  $min-vw: map.get($breakpoint, width);\n\n  // We can use `breakpoint-next` to see if there is another breakpoint we can\n  // use to update `max-font-size` and `max-vw` with larger values\n  $next-breakpoint-available: grid.breakpoint-next($name, $breakpoints);\n  $next-fluid-breakpoint-name: null;\n\n  // We need to figure out what the next available fluid breakpoint is for our\n  // given $type-styles. In this loop we try and iterate through breakpoints\n  // until we either manually set $next-breakpoint-available to null or\n  // `breakpoint-next` returns null.\n  @while $next-breakpoint-available {\n    @if map.has-key($fluid-sizes, $next-breakpoint-available) {\n      $next-fluid-breakpoint-name: $next-breakpoint-available;\n      $next-breakpoint-available: null;\n    } @else {\n      $next-breakpoint-available: grid.breakpoint-next(\n        $next-breakpoint-available,\n        $breakpoints\n      );\n    }\n  }\n\n  // If we have found the next available fluid breakpoint name, then we know\n  // that we have values that we can use to set max-font-size and max-vw as both\n  // values derive from the next breakpoint\n  @if $next-fluid-breakpoint-name {\n    $next-fluid-breakpoint: map.get($breakpoints, $next-fluid-breakpoint-name);\n    $max-font-size: map.get(\n      map.get($fluid-sizes, $next-fluid-breakpoint-name),\n      font-size\n    );\n    $max-vw: map.get($next-fluid-breakpoint, width);\n\n    // prettier-ignore\n    font-size: calc(#{$min-font-size} +\n      #{strip-unit($max-font-size - $min-font-size)} *\n      ((100vw - #{$min-vw}) / #{strip-unit($max-vw - $min-vw)})\n    );\n  } @else {\n    // Otherwise, just default to setting the font size found from the type\n    // style or the given fluid breakpoint in the type style\n    font-size: $min-font-size;\n  }\n}\n\n// TODO move following variable and `custom-property` mixin into shared file for\n// both `@carbon/type` and `@carbon/themes`\n\n/// @access private\n/// @group @carbon/type\n@mixin custom-properties($name, $value) {\n  @each $property, $value in $value {\n    #{$property}: var(\n      --#{$custom-property-prefix}-#{$name}-#{$property},\n      #{$value}\n    );\n  }\n}\n\n/// Helper mixin to include the styles for a given token in any selector in your\n/// project. Also includes an optional fluid option that will enable fluid\n/// styles for the token if they are defined. Fluid styles will cause the\n/// token's font-size to be computed based on the viewport size. As a result, use\n/// with caution in fixed contexts.\n/// @param {String} $name - The name of the token to get the styles for\n/// @param {Boolean} $fluid [false] - Specify whether to include fluid styles for the\n/// @param {Map} $breakpoints [$grid-breakpoints] - Provide a custom breakpoint map to use\n/// @access public\n/// @group @carbon/type\n@mixin type-style(\n  $name,\n  $fluid: false,\n  $breakpoints: gridconfig.$grid-breakpoints\n) {\n  @if not map.has-key($tokens, $name) {\n    @error 'Unable to find a token with the name: `#{$name}`';\n  }\n\n  $token: map.get($tokens, $name);\n\n  // If $fluid is set to true and the token has breakpoints defined for fluid\n  // styles, delegate to the fluid-type helper for the given token\n  @if $fluid == true and map.has-key($token, 'breakpoints') {\n    @include fluid-type($token, $breakpoints);\n  } @else {\n    @include custom-properties($name, $token);\n  }\n}\n"],sourceRoot:""}]),o.locals={header:"-esm-patient-allergies__allergy-form__header___P7zvd",content:"-esm-patient-allergies__allergy-form__content___iEv8G",wrapperContainer:"-esm-patient-allergies__allergy-form__wrapperContainer___vsMlt",radio:"-esm-patient-allergies__allergy-form__radio___XTKxu",checkbox:"-esm-patient-allergies__allergy-form__checkbox___0Cnkb",checkboxContainer:"-esm-patient-allergies__allergy-form__checkboxContainer___XnRHC",button:"-esm-patient-allergies__allergy-form__button___NWHJX",desktopButtons:"-esm-patient-allergies__allergy-form__desktopButtons___OHQg0",tabletButtons:"-esm-patient-allergies__allergy-form__tabletButtons___jiQUo",actionButtons:"-esm-patient-allergies__allergy-form__actionButtons___Dg6RD",formContainer:"-esm-patient-allergies__allergy-form__formContainer___Av8l2",formContent:"-esm-patient-allergies__allergy-form__formContent___IqWxT",form:"-esm-patient-allergies__allergy-form__form___qXnav",loaderContainer:"-esm-patient-allergies__allergy-form__loaderContainer___p5X8M",loading:"-esm-patient-allergies__allergy-form__loading___9VLsU"};const r=o},5645:(e,n,t)=>{t.r(n),t.d(n,{default:()=>U});var a=t(5641),i=t.n(a),l=t(3373),o=t.n(l),r=t(3150),s=t(4625),c=t(6195),p=t(1160),d=t(824),u=t(8254),g=(t(1123),t(8010)),f=t.n(g),y="DRUG",h="FOOD",m="ENVIRONMENT",b="OTHER",$=t(4358),v=t(506),A=t.n(v),_=t(9867),C=t.n(_),k=t(105),x=t.n(k),w=t(7154),z=t.n(w),E=t(5326),M=t.n(E),B=t(7763),R=t.n(B),T=t(1977),O={};O.styleTagTransform=R(),O.setAttributes=z(),O.insert=x().bind(null,"head"),O.domAPI=C(),O.insertStyleElement=M(),A()(T.A,O);const N=T.A&&T.A.locals?T.A.locals:void 0;function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function D(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function I(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),a.forEach((function(n){D(e,n,t[n])}))}return e}function W(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):function(e){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n.push.apply(n,t)}return n}(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})),e}function j(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,n){if(e){if("string"==typeof e)return S(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?S(e,n):void 0}}var F=function(e,n){return c.z.object({allergen:c.z.object({display:c.z.string(),type:c.z.string(),uuid:c.z.string()}).nullable().refine((function(e){return null!==e}),{message:e("allergenRequired","Allergen is required")}),nonCodedAllergen:c.z.string().optional(),allergicReactions:c.z.array(c.z.string().optional()).refine((function(e){return e.some((function(e){return""!==e}))}),{message:e("atLeastOneReactionRequired","At least one reaction is required")}),nonCodedAllergicReaction:c.z.string().optional(),severityOfWorstReaction:c.z.string().nullable().refine((function(e){return null!==e&&""!==e}),{message:e("severityRequired","Severity is required")}),comment:c.z.string().optional()}).superRefine((function(t,a){var i,l;(null===(i=t.allergen)||void 0===i?void 0:i.uuid)!==n||t.nonCodedAllergen||a.addIssue({code:c.z.ZodIssueCode.custom,message:e("nonCodedAllergenRequired","Please specify the non-coded allergen"),path:["nonCodedAllergen"]}),(null===(l=t.allergicReactions)||void 0===l?void 0:l.includes(n))&&!t.nonCodedAllergicReaction&&a.addIssue({code:c.z.ZodIssueCode.custom,message:e("nonCodedAllergicReactionRequired","Please specify the non-coded allergic reaction"),path:["nonCodedAllergicReaction"]})}))};const U=function(e){var n,t,l,c=e.closeWorkspace,g=e.patient,v=e.patientUuid,A=e.allergy,_=e.formContext,C=e.promptBeforeClosing,k=function(){var e=(0,u.useConfig)().concepts,n=e.drugAllergenUuid,t=e.environmentalAllergenUuid,i=e.foodAllergenUuid,l=e.otherConceptUuid,o=f()("".concat(u.restBaseUrl,"/concept/").concat(n,"?v=full"),u.openmrsFetch).data,r=f()("".concat(u.restBaseUrl,"/concept/").concat(t,"?v=full"),u.openmrsFetch).data,s=f()("".concat(u.restBaseUrl,"/concept/").concat(i,"?v=full"),u.openmrsFetch).data;return(0,a.useMemo)((function(){var e=[],n=function(n,t){var a,i;null==n||null===(i=n.data)||void 0===i||null===(a=i.setMembers)||void 0===a||a.forEach((function(n){e.push({uuid:n.uuid,display:n.display,type:t})}))};return n(o,y),n(r,m),n(s,h),e.forEach((function(n,t){n.uuid===l&&e.splice(t,1)})),e.sort((function(e,n){return e.display.localeCompare(n.display)})),{allergens:e,isLoading:!o||!r||!s}}),[o,r,s,l])}().allergens,x=(n=(0,u.useConfig)().concepts.allergyReactionUuid,l=(t=f()("".concat(u.restBaseUrl,"/concept/").concat(n,"?v=full"),u.openmrsFetch)).data,{isLoading:t.isLoading,allergicReactions:null==l?void 0:l.data.setMembers.map((function(e){return{uuid:e.uuid,display:e.display}}))}),w=x.allergicReactions,z=x.isLoading,E=(0,u.useConfig)().concepts,M=(0,$.i2)(v).mutate,B=(0,r.useTranslation)().t,R="tablet"===(0,u.useLayoutType)(),T=(0,a.useRef)(!1),O=(0,a.useMemo)((function(){return E}),[E]),S=O.mildReactionUuid,U=O.moderateReactionUuid,P=O.otherConceptUuid,X=O.severeReactionUuid,G=(0,a.useMemo)((function(){return[{display:B("mild","Mild"),key:"mild",uuid:S},{display:B("moderate","Moderate"),key:"moderate",uuid:U},{display:B("severe","Severe"),key:"severe",uuid:X}]}),[S,U,X,B]),H=(0,a.useCallback)((function(e){switch(e){case"mild":return S;case"moderate":return U;case"severe":return X;default:return null}}),[S,U,X]),L=(0,a.useCallback)((function(){var e;return(null==w?void 0:w.length)&&(null==A||null===(e=A.reactionManifestations)||void 0===e?void 0:e.length)?w.filter((function(e){return A.reactionManifestations.includes(e.display)})).map((function(e){return e.uuid})):[]}),[A,w]),V=(0,a.useCallback)((function(e,n){var t=null==k?void 0:k.map((function(e){return e.display}));return n&&!(null==t?void 0:t.includes(n.display))?W(I({},e),{allergen:{uuid:P,display:B("other","Other"),type:b},nonCodedAllergen:n.display}):e}),[k,P,B]),J=(0,a.useCallback)((function(e,n){var t;if(!(null==n||null===(t=n.reactionManifestations)||void 0===t?void 0:t.length))return e;var a=null==w?void 0:w.map((function(e){return e.display})),i=n.reactionManifestations.find((function(e){return!(null==a?void 0:a.includes(e))}));return i?W(I({},e),{allergicReactions:j(e.allergicReactions).concat([P]),nonCodedAllergicReaction:i}):e}),[w,P]),Q=(0,a.useCallback)((function(e,n){var t,a={allergen:null,nonCodedAllergen:"",allergicReactions:[],nonCodedAllergicReaction:"",severityOfWorstReaction:null,comment:""};if(!e||"editing"!==n)return a;var i=W(I({},a),{allergen:null!==(t=null==k?void 0:k.find((function(n){return e.display===n.display})))&&void 0!==t?t:null,allergicReactions:L(),severityOfWorstReaction:H(e.reactionSeverity),comment:"--"!==e.note?e.note:""}),l=V(i,e);return J(l,e)}),[k,L,H,V,J]),K=(0,d.mN)({mode:"all",resolver:(0,p.u)(F(B,P)),defaultValues:Q(A,_)}),Y=K.control,Z=K.formState,ee=Z.isDirty,ne=Z.isSubmitting,te=Z.errors,ae=K.handleSubmit,ie=K.setValue;(0,a.useEffect)((function(){if(!T.current&&!z&&A&&"editing"===_){var e=Q(A,_);Object.entries(e).forEach((function(e){var n,t,a=(t=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,i,l=[],o=!0,r=!1;try{for(t=t.call(e);!(o=(a=t.next()).done)&&(l.push(a.value),!n||l.length!==n);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(r)throw i}}return l}}(n,t)||q(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=a[0],l=a[1];ie(i,l)})),T.current=!0}}),[A,_,Q,z,ie]),(0,a.useEffect)((function(){C((function(){return ee}))}),[C,ee]);var le=(0,d.FH)({control:Y,name:"allergen"}),oe=(0,d.FH)({control:Y,name:"allergicReactions"}),re=(0,a.useCallback)((function(e){var n=e.allergen,t=e.allergicReactions,a=e.comment,i=e.nonCodedAllergen,l=e.nonCodedAllergicReaction,o=e.severityOfWorstReaction,r=t.filter(Boolean);return{allergen:n.uuid===P?{allergenType:n.type,codedAllergen:{uuid:n.uuid},nonCodedAllergen:i}:{allergenType:n.type,codedAllergen:{uuid:n.uuid}},severity:{uuid:o},comment:a,reactions:r.map((function(e){return e===P?{reaction:{uuid:e},reactionNonCoded:l}:{reaction:{uuid:e}}}))}}),[P]),se=(0,a.useCallback)((function(e){var n=new AbortController,t=re(e),a=function(){M(),c({ignoreChanges:!0}),(0,u.showSnackbar)({isLowContrast:!0,kind:"success",title:"editing"===_?B("allergyUpdated","Allergy updated"):B("allergySaved","Allergy saved"),subtitle:B("allergyNowVisible","It is now visible on the Allergies page")})},i=function(e){var n=e.message;(0,u.showSnackbar)({isLowContrast:!1,kind:"error",title:B("allergySaveError","Error saving allergy"),subtitle:n})};return"editing"===_?function(e,n,t,a){return(0,u.openmrsFetch)("".concat(u.restBaseUrl,"/patient/").concat(n,"/allergy/").concat(t),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:a.signal})}(t,v,null==A?void 0:A.id,n).then(a,i):function(e,n,t){return(0,u.openmrsFetch)("".concat(u.restBaseUrl,"/patient/").concat(n,"/allergy"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t.signal})}(t,v,n).then(a,i)}),[null==A?void 0:A.id,c,re,_,M,v,B]),ce=(0,a.useMemo)((function(){return{patient:g,patientUuid:v}}),[g,v]),pe=(0,a.useMemo)((function(){return j(k).concat([{uuid:P,display:B("other","Other"),type:b}])}),[k,P,B]),de=(0,a.useMemo)((function(){return null==w?void 0:w.sort((function(e,n){return e.display.localeCompare(n.display)})).map((function(e){return{id:e.uuid,labelText:e.display}}))}),[w]);return i().createElement(s.lVW,{className:N.formContainer,onSubmit:ae(se)},R?i().createElement(s.fI1,{className:N.header},i().createElement(u.ExtensionSlot,{className:N.content,name:"patient-details-header-slot",state:ce})):null,i().createElement("div",{className:N.form},z?i().createElement("div",{className:N.loaderContainer},i().createElement(s.OuH,{className:N.loading,description:"".concat(B("loading","Loading")," ...")})):i().createElement(s.BJc,{gap:5,className:N.formContent},(null==le?void 0:le.uuid)===P&&i().createElement(s.jeF,{hideCloseButton:!0,kind:"warning",lowContrast:!0,style:{minWidth:"100%"},subtitle:B("nonCodedAllergenWarningDescription","Adding a custom allergen may impact system-wide allergy notifications. It's recommended to choose from the provided list for accurate alerts. Custom entries may not trigger notifications in all relevant contexts."),title:B("nonCodedAllergenWarningTitle","Warning: Custom Allergen Entry")}),i().createElement(u.ResponsiveWrapper,null,i().createElement(s.gE_,{legendText:""},i().createElement(d.xI,{name:"allergen",control:Y,render:function(e){var n,t=e.field,a=t.onChange,l=t.value;return i().createElement(s.a32,{id:"allergen",invalid:!!te.allergen,invalidText:null===(n=te.allergen)||void 0===n?void 0:n.message,itemToString:function(e){return null==e?void 0:e.display},items:pe,onChange:function(e){void 0!==(null==e?void 0:e.selectedItem)&&a(e.selectedItem)},placeholder:B("selectAllergen","Select the allergen"),selectedItem:l,titleText:B("allergen","Allergen")})}}))),(null==le?void 0:le.uuid)===P&&i().createElement(u.ResponsiveWrapper,null,i().createElement(d.xI,{name:"nonCodedAllergen",control:Y,render:function(e){var n,t=e.field,a=t.onBlur,l=t.onChange,o=t.value;return i().createElement(s.ksK,{id:"nonCodedAllergen",invalid:!!te.nonCodedAllergen,invalidText:null===(n=te.nonCodedAllergen)||void 0===n?void 0:n.message,labelText:B("otherNonCodedAllergen","Other non-coded allergen"),onBlur:a,onChange:l,placeholder:B("typeAllergenName","Please type in the name of the allergen"),value:o})}})),i().createElement(i().Fragment,null,i().createElement("div",{className:o()(D({},N.checkboxContainer,R))},i().createElement(s.gE_,{legendText:"","data-testid":"allergic-reactions-container"},z?i().createElement(i().Fragment,null,Array.from({length:10}).map((function(e,n){return i().createElement(s.d$P,{key:"checkbox-skeleton-".concat(n)})}))):i().createElement(d.xI,{name:"allergicReactions",control:Y,render:function(e){var n,t=e.field,a=t.onChange,l=t.value;return i().createElement(s.$QX,{invalid:!!te.allergicReactions,invalidText:null===(n=te.allergicReactions)||void 0===n?void 0:n.message,legendText:B("selectReactions","Select the reactions")},de.map((function(e){var n=e.id,t=e.labelText;return i().createElement(s.Sc0,{checked:Array.isArray(l)&&l.includes(n),className:N.checkbox,id:n,key:n,labelText:t,onChange:function(e,n){var t=n.checked,i=n.id,o=Array.isArray(l)?l:[];a(t?j(o).concat([i]):o.filter((function(e){return e!==i})))}})})))}}))),(null==oe?void 0:oe.includes(P))?i().createElement(u.ResponsiveWrapper,null,i().createElement(d.xI,{name:"nonCodedAllergicReaction",control:Y,render:function(e){var n,t=e.field,a=t.onBlur,l=t.onChange,o=t.value;return i().createElement(s.ksK,{id:"nonCodedAllergicReaction",invalid:!!te.nonCodedAllergicReaction,invalidText:null===(n=te.nonCodedAllergicReaction)||void 0===n?void 0:n.message,labelText:B("otherNonCodedAllergicReaction","Other non-coded allergic reaction"),onBlur:a,onChange:l,placeholder:B("typeAllergicReactionName","Please type in the name of the allergic reaction"),value:o})}})):null),i().createElement(s.gE_,{legendText:B("severityOfWorstReaction","Severity of worst reaction")},i().createElement(d.xI,{name:"severityOfWorstReaction",control:Y,render:function(e){var n,t=e.field,a=t.onBlur,l=t.onChange,o=t.value;return i().createElement(s.zWQ,{name:"severity-of-worst-reaction",invalid:!!te.severityOfWorstReaction,invalidText:null===(n=te.severityOfWorstReaction)||void 0===n?void 0:n.message,onBlur:a,onChange:function(e){return l(e.toString())},valueSelected:o},G.map((function(e){var n=e.key,t=e.display,a=e.uuid;return i().createElement(s.aaP,{id:n,key:n,labelText:t,value:a})})))}})),i().createElement(u.ResponsiveWrapper,null,i().createElement(d.xI,{name:"comment",control:Y,render:function(e){var n=e.field,t=n.onBlur,a=n.onChange,l=n.value;return i().createElement(s.fs1,{id:"comments",labelText:B("comments","Comments"),onChange:a,placeholder:B("typeAdditionalComments","Type any additional comments here"),onBlur:t,value:l,rows:4})}}))),i().createElement(s.Te$,{className:o()(N.actionButtons,R?N.tabletButtons:N.desktopButtons)},i().createElement(s.$nd,{className:N.button,onClick:c,kind:"secondary"},B("discard","Discard")),i().createElement(s.$nd,{className:N.button,disabled:ne||"editing"===_&&z,kind:"primary",type:"submit"},ne?i().createElement(s.OuH,{description:B("saving","Saving")+"..."}):i().createElement("span",null,B("saveAndClose","Save and close"))))))}}}]);